#jenkins全套
jenkins:
 image: jenkins
 restart: always
 ports:
   - "50001"
   - '8080'
 volumes:
   - /var/docker/ci/jenkins:/var/jenkins_home
 environment:
   - SONAR_PORT=9000
   - SONAR_DB_PORT=5432
   - JENKINS_SLAVE_AGENT_PORT=50000

#sonar全套
sonardb:
 image: postgres
 environment:
  - POSTGRES_USER=sonar
  - POSTGRES_PASSWORD=sonar
  - POSTGRES_DB=sonar
 volumes:
  - /var/docker/ci/sonar/db/lib/postgresql/data:/var/lib/postgresql/data
sonar:
 image: sonarqube
 restart: always
 expose:
  - "9000"
 ports:
  - "9000:9000"
  - "9092:9092"
 links: 
  - sonardb
 environment:
  - SONARQUBE_JDBC_USERNAME=sonar
  - SONARQUBE_JDBC_PASSWORD=sonar
  - SONARQUBE_JDBC_URL=jdbc:postgresql://sonardb:5432/sonar
